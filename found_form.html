<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, textarea, select { width: 100%; margin-bottom: 10px; padding: 8px; border-radius: 8px; border: 1px solid #ccc; }
    button { background-color: #06C755; color: white; padding: 10px; border: none; border-radius: 8px; width: 100%; font-size: 16px; }
  </style>
</head>
<body>
  <h2>üì¶ ‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h2>

  <form id="foundForm">
    <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà:</label>
    <select id="category">
      <option>‡∏ö‡∏±‡∏ï‡∏£</option>
      <option>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</option>
      <option>‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
      <option>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</option>
      <option>‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
    </select>

    <label>‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠ / ‡πÄ‡∏•‡∏Ç‡∏ö‡∏ô‡∏ö‡∏±‡∏ï‡∏£ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
    <input type="text" id="brand" placeholder="‡πÄ‡∏ä‡πà‡∏ô Student ID 6123456">

    <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</label>
    <textarea id="details" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏à‡∏≠‡∏´‡∏π‡∏ü‡∏±‡∏á‡∏™‡∏µ‡∏î‡∏≥ ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î‡∏ä‡∏±‡πâ‡∏ô 2"></textarea>

    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏û‡∏ö:</label>
    <input type="text" id="location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ U2">

    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤:</label>
    <input type="datetime-local" id="datetime">

    <button type="button" id="submitBtn">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  </form>

  <p id="status"></p>

  <script>
    async function main() {
      await liff.init({ liffId: "2008305063-P2NpboxX" })

      if (!liff.isLoggedIn()) liff.login()
      const profile = await liff.getProfile()
      console.log("User:", profile.displayName)

      document.getElementById("submitBtn").onclick = async () => {
        const data = {
          name: profile.displayName,
          userId: profile.userId,
          category: document.getElementById("category").value,
          brand: document.getElementById("brand").value,
          details: document.getElementById("details").value,
          location: document.getElementById("location").value,
          datetime: document.getElementById("datetime").value
        }

        const res = await fetch("https://script.google.com/macros/s/AKfycbxBrtifRvQ2fbRxEq9gDY_RLkAVcN5tsS2ybYJ34GeyzC6S0BR_UyDHSBhygDzkoYnSSw/exec", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        })

        if (res.ok) {
          document.getElementById("status").innerText = "‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞"
          liff.sendMessages([
            { type: "text", text: "‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏û‡∏ö‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞" }
          ])
          //liff.closeWindow()
        } else {
          document.getElementById("status").innerText = "‚ùå ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"
        }
      }
    }

    main()
  </script>
</body>
</html>
