<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body {
            font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #bc3030;
        }

        form {
            max-width: 600px;
            margin: 0 auto;
            padding: 25px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        h1 { text-align: center; color: #2c3e50; }
        p.intro { text-align: center; color: #555; margin-bottom: 25px; }
        .form-group { margin-bottom: 20px; }

        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input, textarea, select {
            width: 100%; padding: 12px; border: 1px solid #ccc;
            border-radius: 4px; font-size: 16px; box-sizing: border-box;
        }
        input[type="file"] { font-size: 16px; }
        button {
            width: 100%; padding: 15px;
            background-color: #ffd13f; color: black;
            border: none; border-radius: 4px;
            cursor: pointer; font-size: 18px; font-weight: bold;
        }
        button:hover { background-color: #da8012; }
        #status { text-align: center; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
    <form id="lostItemForm">
        <h1>üìù ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h1>
        <p class="intro">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏∞</p>

        <div class="form-group">
            <label for="itemName">‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏´‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</label>
            <input type="text" id="itemName" name="itemName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå, ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required>
        </div>

        <div class="form-group">
            <label for="brand">‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠ / ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
            <input type="text" id="brand" name="brand" placeholder="‡πÄ‡∏ä‡πà‡∏ô Apple, Samsonite, 1234-5678-xxxx">
        </div>

        <div class="form-group">
            <label for="description">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏î‡πà‡∏ô / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <textarea id="description" name="description" rows="4" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏™‡∏µ‡∏ü‡πâ‡∏≤ ‡∏°‡∏µ‡∏£‡∏≠‡∏¢‡∏Ç‡∏µ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á" required></textarea>
        </div>

        <div class="form-group">
            <label for="location">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏´‡∏≤‡∏¢</label>
            <input type="text" id="location" name="location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏´‡∏≠‡∏™‡∏°‡∏∏‡∏î‡∏õ‡πã‡∏ß‡∏¢" required>
        </div>

        <div class="form-group">
            <label for="lostDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏´‡∏≤‡∏¢</label>
            <input type="date" id="lostDate" name="lostDate" required>
        </div>

        <div class="form-group">
            <label for="lostTime">‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</label>
            <input type="time" id="lostTime" name="lostTime" required>
        </div>

        <div class="form-group">
            <label for="itemImage">‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
            <input type="file" id="itemImage" name="itemImage" accept="image/*">
        </div>

        <button type="button" id="submitBtn">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</button>
        <p id="status"></p>
    </form>

    <script>
        async function main() {
            await liff.init({ liffId: "2008305063-P2NpboxX" }); // üîπ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
            if (!liff.isLoggedIn()) {
                liff.login({ redirectUri: window.location.href });
                return;
            }

            const profile = await liff.getProfile();

            document.getElementById("submitBtn").onclick = async () => {
                const formData = {
                    type: "lost", // ‡πÉ‡∏ä‡πâ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏ô backend
                    name: profile.displayName,
                    userId: profile.userId,
                    itemName: document.getElementById("itemName").value,
                    brand: document.getElementById("brand").value,
                    description: document.getElementById("description").value,
                    location: document.getElementById("location").value,
                    lostDate: document.getElementById("lostDate").value,
                    lostTime: document.getElementById("lostTime").value
                };

                const res = await fetch("https://script.google.com/macros/s/AKfycbxBrtifRvQ2fbRxEq9gDY_RLkAVcN5tsS2ybYJ34GeyzC6S0BR_UyDHSBhygDzkoYnSSw/exec", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData)
                });

                if (res.ok) {
                    document.getElementById("status").innerText = "‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞";
                    await liff.sendMessages([
                        { type: "text", text: "‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞" }
                    ]);
                    //liff.closeWindow();
                } else {
                    document.getElementById("status").innerText = "‚ùå ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
                }
            };
        }
        main();
    </script>
</body>
</html>
